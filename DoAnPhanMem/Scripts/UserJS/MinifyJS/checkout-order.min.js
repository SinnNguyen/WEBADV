$(document).ready(function () { $(".nice-select").remove() }), $(document).ready(function () { $("#province").change(function () { $("#district").removeClass("cursor-disable"), $("#district").removeAttr("disabled"), $.get("/Account/GetDistrictsList", { province_id: $("#province").val() }, function (e) { $("#district").html("<option value>Quận/ Huyện</option>"), $.each(e, function (e, t) { $("#district").append("<option value='" + t.district_id + "'>" + t.type + " " + t.district_name + "</option>") }) }) }), $("#district").change(function () { $("#ward").removeClass("cursor-disable"), $("#ward").removeAttr("disabled"), $.get("/Account/GetWardsList", { district_id: $("#district").val() }, function (e) { $("#ward").html("<option value>Phường/ Xã</option>"), $.each(e, function (e, t) { $("#ward").append("<option value='" + t.ward_id + "'>" + t.type + " " + t.ward_name + "</option>") }) }) }) }); var createmodaladd = $("#ModalOrderAddCreate"); $("#popupcreateaddress").click(function () { createmodaladd.modal("show") }), $("#closemodal3").click(function () { createmodaladd.modal("hide") }); var SaveAddressOrder = function () { var e = $("#address_name").val(), t = $("#address_phone").val(), r = $("#province").val(), d = $("#province :selected").text(), n = $("#district").val(), i = $("#district :selected").text(), a = $("#address_content").val(), s = $("#ward").val(), o = $("#ward :selected").text(); if ("" == e || "" == t || "" == r || "" == n || "" == s || "" == a) { return Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 2500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "warning", title: "Nhập thông tin còn thiếu" }), !1 } if (t.length < 10 || t.length > 10) { return Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 2500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "warning", title: "Số điện thoại phải đúng 10 chữ số" }), !1 } if (e.length > 20) { return Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 2500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "warning", title: "Họ tên không quá 20 ký tự" }), !1 } if (a.length > 50) { return Swal.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 2500, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "warning", title: "Địa chỉ cụ thể không quá 50 ký tự" }), !1 } var c = $("#create_address__order").serialize(); $.ajax({ type: "POST", url: "/Account/AddressCreate", data: c, success: function (r) { if (createmodaladd.modal("hide"), 1 == r) { $(".order_address_name").attr("value", e), $(".order_address_phone").attr("value", t), $(".ck_address_province").attr("value", d), $(".ck_address_district").attr("value", i), $(".ck_address_ward").attr("value", o), $(".ck_address_content").attr("value", a), $(".btn_submit_order").attr("id", "submit_order"), $(".btn_submit_order").addClass("order_now"), $(".btn_submit_order").attr("type", "submit"), $(".message_order").text("(Đặt hàng để xác nhận thanh toán)"), $(".btn_submit_order").removeAttr("disabled"), $(".create_order_address").removeAttr("hidden"), $(".order_now").removeClass("btn_submit_order"), $(".ck_notexist_address").remove(), $(".order_address").text(a + ", " + o + ", " + i + ", " + d), Swal.mixin({ toast: !0, position: "top", showConfirmButton: !1, timer: 2e3, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "success", title: "Thêm địa chỉ thành công" }) } else { Swal.mixin({ toast: !0, position: "top", showConfirmButton: !1, timer: 1e3, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "error", title: "Lỗi" }) } } }) }, change_od_add = $("#ckchangeaddress"); $("#op_ckchangeaddress").click(function () { change_od_add.modal("show") }), $(".close_modal").click(function () { change_od_add.modal("hide") }); var Change_order_address_confirm = function () { var e = $("#change_order__address").serialize(); $.ajax({ type: "POST", url: "/Cart/ChangeAdressOrder", data: e, success: function (e) { if (change_od_add.modal("hide"), 1 == e) { var t, r; $('input[name="account_address_id"]:radio:checked').each(function () { t = $(this).parent().find(".get_acc_username").text(), r = $(this).parent().find(".get_acc_phone_num").text(), _address = $(this).parent().find(".get_address").text(), _address_province = $(this).parent().find(".get_address_province").text(), _address_district = $(this).parent().find(".get_address_district").text(), _address_ward = $(this).parent().find(".get_address_ward").text(), _address_content = $(this).parent().find(".get_address_content").text() }), $(".ck_address").text(_address), $(".ck_username").val(t), $(".ck_phone_num").val(r), $(".ck_address_province").val(_address_province), $(".ck_address_district").val(_address_district), $(".ck_address_ward").val(_address_ward), $(".ck_address_content").val(_address_content), Swal.mixin({ toast: !0, position: "top", showConfirmButton: !1, timer: 2e3, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "success", title: "Cập nhật địa chỉ thành công" }) } else { Swal.mixin({ toast: !0, position: "top", showConfirmButton: !1, timer: 1e3, didOpen: e => { e.addEventListener("mouseenter", Swal.stopTimer), e.addEventListener("mouseleave", Swal.resumeTimer) } }).fire({ icon: "error", title: "Lỗi" }) } } }) };